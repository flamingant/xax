<!doctype html public "-//W3C//DTD HTML 4.01 Transitional//EN">
<!-- stub file ~/emacs/.stub/html/default.html --!>
<html>
<head>
<title></title>
<link rel="stylesheet" type="text/css" href="http://boo/daily/css/daily.css">
<script type="text/javascript" src="http://boo/js/jquery-ui-1.8.21.spix/js/jquery-1.7.2.min.js"></script>          
<script type="text/javascript" src="http://boo/js/jquery-ui-1.8.21.spix/js/jquery-ui-1.8.21.custom.min.js">
</script>          
<!--================================================================-->
<script type="text/javascript" src="bvc.js"></script>          

<script>
function show()
{
    if (this.readyState == 4) {
	var e = $(this.local.element) ;
	if (this.status==200) {
	    var jr = JSON.parse(this.responseText);
	    e.html(jr.element + " is now " + jr.state) ;
	    }
	else {
	    e.html("<h2>hey! " + this.status + "</h2>") ;
	}
    }
}

function url_r(r)
{
    return "http:"+r ;
}

function c_session() {
    var xmlhttp;
    xmlhttp=bvc.XMLHttpRequest() ;

    xmlhttp.local = {"element": "#session-state"} ;

    xmlhttp.onreadystatechange=show ;

    xmlhttp.open("GET",url_r("/session"),true);
    xmlhttp.send();
}

function c_timer() {
    var xmlhttp;
    xmlhttp=bvc.XMLHttpRequest() ;

    xmlhttp.local = {"element": "#timer-state"} ;

    xmlhttp.onreadystatechange=show ;

    xmlhttp.open("GET",url_r("/timer"),true);
    xmlhttp.send();
}

function c_irc() {
    var xmlhttp;
    xmlhttp=bvc.XMLHttpRequest() ;
    xmlhttp.local = {"element": "#generic-status"} ;

    xmlhttp.onreadystatechange=show ;

    xmlhttp.open("GET",url_r("/irc?state=toggle"),true);
    xmlhttp.send();
}

function c_check() {
    var xmlhttp;
    xmlhttp=bvc.XMLHttpRequest() ;
    xmlhttp.local = {"element": "#generic-status"} ;

    xmlhttp.onreadystatechange=show ;

    xmlhttp.open("GET",url_r("/check?state=toggle"),true);
    xmlhttp.send();
}

function c_relabel() {
    var xmlhttp;
    var style = $("#generic-arg-0").val() ;
    xmlhttp=bvc.XMLHttpRequest() ;
    xmlhttp.local = {"element": "#generic-status"} ;

    xmlhttp.onreadystatechange=show ;

    xmlhttp.open("GET",url_r("/relabel?style="+style),true);
    xmlhttp.send();
}

function c_fail() {
    var xmlhttp;
    xmlhttp=bvc.XMLHttpRequest() ;
    xmlhttp.local = {"element": "#generic-status"} ;

    xmlhttp.onreadystatechange=show ;

    xmlhttp.open("GET",url_r("/fail"),true);
    xmlhttp.send();
}

function xxopen(url) {
    var x = bvc.XMLHttpRequest() ;
    x.local = {"element": "#generic-status"} ;
    x.onreadystatechange=show ;
    x.open("GET",url,true);
    x.send() ;
}

function aa(e,url) {
    e.click(function() {
	    var x = bvc.XMLHttpRequest() ;
	    x.local = {"element": "#generic-status"} ;
	    x.onreadystatechange=show ;
	    x.open("GET",url,true);
	    x.send() ;
	    }
	) ;}

function shortcuts(event) {
    if (event.keyCode == "Q".charCodeAt(0)) {xxopen("/quit") ;}
};

function doc_ready() {
    $("#session").click(c_session) ;
    $("#timer").click(c_timer) ;
    $("#irc").click(c_irc) ;
    $("#check").click(c_check) ;
    $("#fail").click(c_fail) ;
    $("#relabel").click(c_relabel) ;
    aa($("#quit"),url_r("/quit")) ;
    aa($("#all-status"),url_r("/get_all_status")) ;
    document.addEventListener('keydown',shortcuts) ;
}

$(document).ready(doc_ready) ;

</script>
<!--================================================================-->
</head>
<body>
 
<div><h2>Session State <span id="session-state">Off</span></h2></div>
<div id="timer-state"><h2>&nbsp;</h2></div>
<div id="generic-status"><h2>&nbsp;</h2></div>
<input id="generic-arg-0" type="text" value="foz">

<button id="timer">Timer</button>
<button id="session">Session</button>
<button id="irc">IRC</button>
<button id="check">Check</button>
<button id="relabel">Relabel</button>
<button id="fail">Fail</button>
<button id="quit">Quit</button>
<button id="all-status">all-status</button>
<p>
<button id="prune">prune</button>

<form method="GET" action="/torrent-start">
<input type="text" name="id" value="30813532">
<input type=submit name="" value="go">
</form>
 
<form method="GET" action="/what">
<input type="text" name="cmd" value="search">
<input type="text" name="page" value="1">
<input type=submit name="" value="go">
</form>
 
<a href="/apply?where=label%3d'0809'%20and%20ratio%3c0.1&action=/torrent_kill">kill</a>
<a href="grid.html">Grid</a>
<a href="/apply?where=label%3d'--new-1'%20and%20ratio%3e1.0&action=/torrent_label&extra=%26label%3d1-plus">
  label</a>
<a href="/get_all_status?label=--new-1&fields=ratio,total_done">
  q</a>
<a href="/emacs?file=//boo/e/.p/_/index.php&search=css">emacs</a>
<a href="/edit?file=e:/daily/snips.txt">edit</a>
<a href="/open?file=e:/daily/snips.txt">open</a>
<a href="/open?file=e:/daily/snips.doc">doc</a><p>
<a href="/ufi-test">ufi</a>
<a href="/torrent-label-per-ratio">label</a>
<a href="/what?cmd=login">login</a>
<!--================================================================-->
</body>
</html>
<!--  -->
